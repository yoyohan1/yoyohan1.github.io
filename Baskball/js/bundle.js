var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameMgr_1 = require("./script/GameMgr");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("script/GameMgr.ts", GameMgr_1.default);
    };
    GameConfig.width = 960;
    GameConfig.height = 640;
    GameConfig.scaleMode = "fixedheight";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "middle";
    GameConfig.alignH = "center";
    GameConfig.startScene = "startScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./script/GameMgr":4}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var BallCtrl = /** @class */ (function (_super) {
    __extends(BallCtrl, _super);
    function BallCtrl() {
        var _this = _super.call(this) || this;
        _this.maxForce = 6.5;
        _this.minForce = 4.5;
        return _this;
    }
    BallCtrl.prototype.onAwake = function () {
        this.rigid = this.owner.getComponent(Laya.Rigidbody3D);
        Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseDown);
        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.onMouseUp);
        this.curBallState = BallState.Idle;
        this.groupSpeed = (this.maxForce - this.minForce) / 2.5;
        this.addForce = 0;
    };
    BallCtrl.prototype.onUpdate = function () {
        var dt = Laya.timer.delta / 1000;
        if (this.curBallState == BallState.AddForce) {
            this.addForce += dt * this.groupSpeed;
            if (this.addForce > this.maxForce - this.minForce) {
                this.addForce = this.maxForce - this.minForce;
            }
            var per = this.addForce / (this.maxForce - this.minForce);
            per = per > 1 ? 1 : per;
            Laya.stage.event("set_slider_value", per);
        }
    };
    BallCtrl.prototype.onMouseDown = function () {
        console.log("onMouseDown!");
        Laya.stage.event("hideTweener");
        if (this.curBallState != BallState.Idle) {
            return;
        }
        this.curBallState = BallState.AddForce;
    };
    BallCtrl.prototype.onMouseUp = function () {
        console.log("onMouseUp!");
        if (this.curBallState != BallState.AddForce) {
            return;
        }
        this.curBallState = BallState.Throw;
        this.thorwBall();
    };
    BallCtrl.prototype.thorwBall = function () {
        if (this.curBallState != BallState.Throw) {
            return;
        }
        var speed = this.minForce + this.addForce;
        var vy = speed * Math.sin(Math.PI / 4);
        var vz = vy;
        this.rigid.linearVelocity = new Laya.Vector3(0, vy, vz);
        this.rigid.gravity = new Laya.Vector3(0, -10, 0);
        Laya.timer.once(5000, this, this.onCheckOut);
    };
    BallCtrl.prototype.onCheckOut = function () {
        this.owner.removeSelf();
        Laya.stage.event("gen_new_ball");
    };
    BallCtrl.prototype.onTriggerEnter = function (other) {
        if (this.curBallState == BallState.None) {
            return;
        }
        Laya.stage.event("success");
        this.curBallState = BallState.None;
    };
    BallCtrl.prototype.onDestroy = function () {
        Laya.stage.off(Laya.Event.MOUSE_DOWN, this, this.onMouseDown);
        Laya.stage.off(Laya.Event.MOUSE_UP, this, this.onMouseUp);
    };
    return BallCtrl;
}(Laya.Script3D));
exports.default = BallCtrl;
var BallState;
(function (BallState) {
    BallState[BallState["None"] = 0] = "None";
    BallState[BallState["Idle"] = 1] = "Idle";
    BallState[BallState["AddForce"] = 2] = "AddForce";
    BallState[BallState["Throw"] = 3] = "Throw";
})(BallState || (BallState = {}));
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var BallCtrl_1 = require("./BallCtrl");
var GameMgr = /** @class */ (function (_super) {
    __extends(GameMgr, _super);
    function GameMgr() {
        return _super.call(this) || this;
    }
    Object.defineProperty(GameMgr.prototype, "score", {
        get: function () {
            return this._score;
        },
        set: function (v) {
            this._score = v;
            this.scoreText.text = this._score + "";
        },
        enumerable: true,
        configurable: true
    });
    GameMgr.prototype.onAwake = function () {
        var _this = this;
        Laya.Scene3D.load("res/scenes3D/LayaScene_game_scene/Conventional/game_scene.ls", Laya.Handler.create(this, this.onLoadSceneCmp));
        Laya.stage.on("gen_new_ball", this, this.onGenNewBall);
        Laya.stage.on("set_slider_value", this, this.SetSliderValue);
        Laya.stage.on("success", this, this.OnGoal);
        this.SetSliderValue(0);
        this.score = 0;
        this.tweenOver2();
        Laya.stage.on("hideTweener", this, function () {
            if (_this.hintText.visible == true) {
                _this.tweener1.clear();
                _this.tweener2.clear();
                _this.hintText.visible = false;
            }
        });
    };
    GameMgr.prototype.tweenOver1 = function () {
        if (this.tweener1 != null) {
            this.tweener1.clear();
        }
        this.tweener2 = Laya.Tween.to(this.hintText, { "alpha": 1 }, 500, Laya.Ease.linearNone, Laya.Handler.create(this, this.tweenOver2));
    };
    GameMgr.prototype.tweenOver2 = function () {
        if (this.tweener2 != null) {
            this.tweener2.clear();
        }
        this.tweener1 = Laya.Tween.to(this.hintText, { "alpha": 0 }, 500, Laya.Ease.linearNone, Laya.Handler.create(this, this.tweenOver1));
    };
    GameMgr.prototype.SetSliderValue = function (value) {
        if (value < 0 || value >= 1) {
            return;
        }
        this.hSlider.value = value;
    };
    GameMgr.prototype.onGenNewBall = function () {
        this.SetSliderValue(0);
        var newball = Laya.Sprite3D.instantiate(this.ball_prefab);
        this.scene3D.addChild(newball);
    };
    //得分
    GameMgr.prototype.OnGoal = function () {
        console.log(this.part.name);
        this.part.particleSystem.play();
        this.score++;
    };
    GameMgr.prototype.onLoadSceneCmp = function (scenes3D) {
        Laya.stage.addChild(scenes3D);
        this.scene3D = scenes3D;
        scenes3D.zOrder = -1;
        var ball = scenes3D.getChildByName("ball");
        ball.addComponent(BallCtrl_1.default);
        this.ball_prefab = Laya.Sprite3D.instantiate(ball);
        this.part = scenes3D.getChildByName("particle");
    };
    GameMgr.prototype.onEnable = function () {
        console.log("onEnable!!!!!");
    };
    GameMgr.prototype.onDisable = function () {
    };
    return GameMgr;
}(Laya.Script));
exports.default = GameMgr;
},{"./BallCtrl":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1dvcmtTb2Z0d2FyZS9MYXlhSURFIDIuMS4wL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL01haW4udHMiLCJzcmMvc2NyaXB0L0JhbGxDdHJsLnRzIiwic3JjL3NjcmlwdC9HYW1lTWdyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBLGdHQUFnRztBQUNoRyw0Q0FBc0M7QUFDdEM7O0VBRUU7QUFDRjtJQWFJO0lBQWMsQ0FBQztJQUNSLGVBQUksR0FBWDtRQUNJLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO1FBQzdDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBQyxpQkFBTyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQWhCTSxnQkFBSyxHQUFRLEdBQUcsQ0FBQztJQUNqQixpQkFBTSxHQUFRLEdBQUcsQ0FBQztJQUNsQixvQkFBUyxHQUFRLGFBQWEsQ0FBQztJQUMvQixxQkFBVSxHQUFRLE1BQU0sQ0FBQztJQUN6QixpQkFBTSxHQUFRLFFBQVEsQ0FBQztJQUN2QixpQkFBTSxHQUFRLFFBQVEsQ0FBQztJQUN2QixxQkFBVSxHQUFLLGtCQUFrQixDQUFDO0lBQ2xDLG9CQUFTLEdBQVEsRUFBRSxDQUFDO0lBQ3BCLGdCQUFLLEdBQVMsS0FBSyxDQUFDO0lBQ3BCLGVBQUksR0FBUyxLQUFLLENBQUM7SUFDbkIsdUJBQVksR0FBUyxLQUFLLENBQUM7SUFDM0IsNEJBQWlCLEdBQVMsSUFBSSxDQUFDO0lBTTFDLGlCQUFDO0NBbEJELEFBa0JDLElBQUE7a0JBbEJvQixVQUFVO0FBbUIvQixVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7Ozs7QUN4QmxCLDJDQUFzQztBQUN0QztJQUNDO1FBQ0MsZ0JBQWdCO1FBQ2hC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QUVELElBQUk7SUFDSSx3QkFBTSxHQUFkO1FBQ0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRU8sZ0NBQWMsR0FBdEIsVUFBdUIsUUFBc0I7UUFDekMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFOUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7UUFDeEIsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQixJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsa0JBQVEsQ0FBQyxDQUFDO1FBRTVCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBcUIsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQTRCLENBQUM7SUFDL0UsQ0FBQztJQUVELDBCQUFRLEdBQVI7UUFDSSxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCwyQkFBUyxHQUFUO0lBQ0EsQ0FBQztJQUNMLGNBQUM7QUFBRCxDQTFHQSxBQTBHQyxDQTFHb0MsSUFBSSxDQUFDLE1BQU0sR0EwRy9DIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgR2FtZU1nciBmcm9tIFwiLi9zY3JpcHQvR2FtZU1nclwiXHJcbi8qXHJcbiog5ri45oiP5Yid5aeL5YyW6YWN572uO1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlne1xyXG4gICAgc3RhdGljIHdpZHRoOm51bWJlcj05NjA7XHJcbiAgICBzdGF0aWMgaGVpZ2h0Om51bWJlcj02NDA7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkaGVpZ2h0XCI7XHJcbiAgICBzdGF0aWMgc2NyZWVuTW9kZTpzdHJpbmc9XCJub25lXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25WOnN0cmluZz1cIm1pZGRsZVwiO1xyXG4gICAgc3RhdGljIGFsaWduSDpzdHJpbmc9XCJjZW50ZXJcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cInN0YXJ0U2NlbmUuc2NlbmVcIjtcclxuICAgIHN0YXRpYyBzY2VuZVJvb3Q6c3RyaW5nPVwiXCI7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBzdGF0OmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG4gICAgICAgIHJlZyhcInNjcmlwdC9HYW1lTWdyLnRzXCIsR2FtZU1ncik7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFsbEN0cmwgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuXHJcbiAgICBwcml2YXRlIGN1ckJhbGxTdGF0ZTogQmFsbFN0YXRlO1xyXG4gICAgcHJpdmF0ZSByaWdpZDogTGF5YS5SaWdpZGJvZHkzRDtcclxuXHJcbiAgICBwcml2YXRlIG1heEZvcmNlOiBudW1iZXIgPSA2LjU7XHJcbiAgICBwcml2YXRlIG1pbkZvcmNlOiBudW1iZXIgPSA0LjU7XHJcbiAgICBwcml2YXRlIGFkZEZvcmNlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGdyb3VwU3BlZWQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG5cclxuICAgIG9uQXdha2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yaWdpZCA9IHRoaXMub3duZXIuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG4gICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5NT1VTRV9ET1dOLCB0aGlzLCB0aGlzLm9uTW91c2VEb3duKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfVVAsIHRoaXMsIHRoaXMub25Nb3VzZVVwKTtcclxuICAgICAgICB0aGlzLmN1ckJhbGxTdGF0ZSA9IEJhbGxTdGF0ZS5JZGxlO1xyXG5cclxuICAgICAgICB0aGlzLmdyb3VwU3BlZWQgPSAodGhpcy5tYXhGb3JjZSAtIHRoaXMubWluRm9yY2UpIC8gMi41O1xyXG4gICAgICAgIHRoaXMuYWRkRm9yY2UgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBkdCA9IExheWEudGltZXIuZGVsdGEgLyAxMDAwO1xyXG4gICAgICAgIGlmICh0aGlzLmN1ckJhbGxTdGF0ZSA9PSBCYWxsU3RhdGUuQWRkRm9yY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRGb3JjZSArPSBkdCAqIHRoaXMuZ3JvdXBTcGVlZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWRkRm9yY2UgPiB0aGlzLm1heEZvcmNlIC0gdGhpcy5taW5Gb3JjZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGb3JjZSA9IHRoaXMubWF4Rm9yY2UgLSB0aGlzLm1pbkZvcmNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcGVyID0gdGhpcy5hZGRGb3JjZSAvICh0aGlzLm1heEZvcmNlIC0gdGhpcy5taW5Gb3JjZSk7XHJcbiAgICAgICAgICAgIHBlciA9IHBlciA+IDEgPyAxIDogcGVyO1xyXG4gICAgICAgICAgICBMYXlhLnN0YWdlLmV2ZW50KFwic2V0X3NsaWRlcl92YWx1ZVwiLCBwZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRG93bigpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm9uTW91c2VEb3duIVwiKTtcclxuICAgICAgICBMYXlhLnN0YWdlLmV2ZW50KFwiaGlkZVR3ZWVuZXJcIik7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VyQmFsbFN0YXRlICE9IEJhbGxTdGF0ZS5JZGxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJCYWxsU3RhdGUgPSBCYWxsU3RhdGUuQWRkRm9yY2U7XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZVVwKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwib25Nb3VzZVVwIVwiKTtcclxuICAgICAgICBpZiAodGhpcy5jdXJCYWxsU3RhdGUgIT0gQmFsbFN0YXRlLkFkZEZvcmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJCYWxsU3RhdGUgPSBCYWxsU3RhdGUuVGhyb3c7XHJcbiAgICAgICAgdGhpcy50aG9yd0JhbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aG9yd0JhbGwoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VyQmFsbFN0YXRlICE9IEJhbGxTdGF0ZS5UaHJvdykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzcGVlZCA9IHRoaXMubWluRm9yY2UgKyB0aGlzLmFkZEZvcmNlO1xyXG4gICAgICAgIHZhciB2eSA9IHNwZWVkICogTWF0aC5zaW4oTWF0aC5QSSAvIDQpO1xyXG4gICAgICAgIHZhciB2eiA9IHZ5O1xyXG5cclxuICAgICAgICB0aGlzLnJpZ2lkLmxpbmVhclZlbG9jaXR5ID0gbmV3IExheWEuVmVjdG9yMygwLCB2eSwgdnopO1xyXG4gICAgICAgIHRoaXMucmlnaWQuZ3Jhdml0eSA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgLTEwLCAwKTtcclxuXHJcbiAgICAgICAgTGF5YS50aW1lci5vbmNlKDUwMDAsIHRoaXMsIHRoaXMub25DaGVja091dCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGVja091dCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm93bmVyLnJlbW92ZVNlbGYoKTtcclxuXHJcbiAgICAgICAgTGF5YS5zdGFnZS5ldmVudChcImdlbl9uZXdfYmFsbFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvblRyaWdnZXJFbnRlcihvdGhlcjogTGF5YS5QaHlzaWNzQ29tcG9uZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VyQmFsbFN0YXRlID09IEJhbGxTdGF0ZS5Ob25lKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgTGF5YS5zdGFnZS5ldmVudChcInN1Y2Nlc3NcIik7XHJcbiAgICAgICAgdGhpcy5jdXJCYWxsU3RhdGUgPSBCYWxsU3RhdGUuTm9uZTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5vZmYoTGF5YS5FdmVudC5NT1VTRV9ET1dOLCB0aGlzLCB0aGlzLm9uTW91c2VEb3duKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9mZihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgICB9XHJcbn1cclxuZW51bSBCYWxsU3RhdGUge1xyXG4gICAgTm9uZSxcclxuICAgIElkbGUsXHJcbiAgICBBZGRGb3JjZSxcclxuICAgIFRocm93XHJcbn0iLCJpbXBvcnQgQmFsbEN0cmwgZnJvbSBcIi4vQmFsbEN0cmxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVNZ3IgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqIEBwcm9wIHtuYW1lOmhTbGlkZXIsIHRpcHM6XCLov5vluqbmnaFcIiwgdHlwZTpOb2RlLCBkZWZhdWx0Om51bGx9Ki9cclxuICAgIHB1YmxpYyBoU2xpZGVyOiBMYXlhLkhTbGlkZXI7XHJcbiAgICAvKiogQHByb3Age25hbWU6c2NvcmVUZXh0LCB0aXBzOlwi5b6X5YiGXCIsIHR5cGU6Tm9kZSwgZGVmYXVsdDpudWxsfSovXHJcbiAgICBwdWJsaWMgc2NvcmVUZXh0OiBMYXlhLkxhYmVsO1xyXG4gICAgLyoqIEBwcm9wIHtuYW1lOmhpbnRUZXh0LCB0aXBzOlwi5byA5bGA5bCP5o+Q56S6XCIsIHR5cGU6Tm9kZSwgZGVmYXVsdDpudWxsfSovXHJcbiAgICBwdWJsaWMgaGludFRleHQ6IExheWEuTGFiZWw7XHJcblxyXG5cclxuICAgIHByaXZhdGUgYmFsbF9wcmVmYWI6IGFueTtcclxuICAgIHByaXZhdGUgc2NlbmUzRDogTGF5YS5TY2VuZTNEO1xyXG4gICAgcHJpdmF0ZSBwYXJ0OiBMYXlhLlNodXJpS2VuUGFydGljbGUzRDtcclxuXHJcbiAgICBwcml2YXRlIF9zY29yZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGdldCBzY29yZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zY29yZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc2NvcmUodjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fc2NvcmUgPSB2O1xyXG4gICAgICAgIHRoaXMuc2NvcmVUZXh0LnRleHQgPSB0aGlzLl9zY29yZSArIFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0d2VlbmVyMTogTGF5YS5Ud2VlbjtcclxuICAgIHByaXZhdGUgdHdlZW5lcjI6IExheWEuVHdlZW47XHJcblxyXG4gICAgb25Bd2FrZSgpOiB2b2lkIHtcclxuICAgICAgICBMYXlhLlNjZW5lM0QubG9hZChcInJlcy9zY2VuZXMzRC9MYXlhU2NlbmVfZ2FtZV9zY2VuZS9Db252ZW50aW9uYWwvZ2FtZV9zY2VuZS5sc1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Mb2FkU2NlbmVDbXApKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKFwiZ2VuX25ld19iYWxsXCIsIHRoaXMsIHRoaXMub25HZW5OZXdCYWxsKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKFwic2V0X3NsaWRlcl92YWx1ZVwiLCB0aGlzLCB0aGlzLlNldFNsaWRlclZhbHVlKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKFwic3VjY2Vzc1wiLCB0aGlzLCB0aGlzLk9uR29hbCk7XHJcbiAgICAgICAgdGhpcy5TZXRTbGlkZXJWYWx1ZSgwKTtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy50d2Vlbk92ZXIyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgTGF5YS5zdGFnZS5vbihcImhpZGVUd2VlbmVyXCIsIHRoaXMsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGludFRleHQudmlzaWJsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR3ZWVuZXIxLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR3ZWVuZXIyLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpbnRUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHdlZW5PdmVyMSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy50d2VlbmVyMSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHdlZW5lcjEuY2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHdlZW5lcjIgPSBMYXlhLlR3ZWVuLnRvKHRoaXMuaGludFRleHQsIHsgXCJhbHBoYVwiOiAxIH0sNTAwLCBMYXlhLkVhc2UubGluZWFyTm9uZSwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLnR3ZWVuT3ZlcjIpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHR3ZWVuT3ZlcjIoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudHdlZW5lcjIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnR3ZWVuZXIyLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnR3ZWVuZXIxID0gTGF5YS5Ud2Vlbi50byh0aGlzLmhpbnRUZXh0LCB7IFwiYWxwaGFcIjogMCB9LCA1MDAsIExheWEuRWFzZS5saW5lYXJOb25lLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMudHdlZW5PdmVyMSkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIFNldFNsaWRlclZhbHVlKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oU2xpZGVyLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkdlbk5ld0JhbGwoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5TZXRTbGlkZXJWYWx1ZSgwKTtcclxuICAgICAgICB2YXIgbmV3YmFsbCA9IExheWEuU3ByaXRlM0QuaW5zdGFudGlhdGUodGhpcy5iYWxsX3ByZWZhYik7XHJcbiAgICAgICAgdGhpcy5zY2VuZTNELmFkZENoaWxkKG5ld2JhbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5b6X5YiGXHJcbiAgICBwcml2YXRlIE9uR29hbCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBhcnQubmFtZSk7XHJcbiAgICAgICAgdGhpcy5wYXJ0LnBhcnRpY2xlU3lzdGVtLnBsYXkoKTtcclxuICAgICAgICB0aGlzLnNjb3JlKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkxvYWRTY2VuZUNtcChzY2VuZXMzRDogTGF5YS5TY2VuZTNEKTogdm9pZCB7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZChzY2VuZXMzRCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUzRCA9IHNjZW5lczNEO1xyXG4gICAgICAgIHNjZW5lczNELnpPcmRlciA9IC0xO1xyXG4gICAgICAgIHZhciBiYWxsID0gc2NlbmVzM0QuZ2V0Q2hpbGRCeU5hbWUoXCJiYWxsXCIpO1xyXG4gICAgICAgIGJhbGwuYWRkQ29tcG9uZW50KEJhbGxDdHJsKTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxsX3ByZWZhYiA9IExheWEuU3ByaXRlM0QuaW5zdGFudGlhdGUoYmFsbCBhcyBMYXlhLlNwcml0ZTNEKTtcclxuICAgICAgICB0aGlzLnBhcnQgPSBzY2VuZXMzRC5nZXRDaGlsZEJ5TmFtZShcInBhcnRpY2xlXCIpIGFzIExheWEuU2h1cmlLZW5QYXJ0aWNsZTNEO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwib25FbmFibGUhISEhIVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKTogdm9pZCB7XHJcbiAgICB9XHJcbn0iXX0=
